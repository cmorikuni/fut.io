<html>
<head>
    <link rel="stylesheet" type="text/css" href="https://cmorikuni.github.io/fut.io/style.css">
    <title>FUT Randomizer</title>
</head>

<body class="sansserif">
<!--
FEATURES:
DONE: numbers (1-99)
DONE: simple equations ([0-9] +,- [0-9])
DONE: toggle numbers/equations
DONE: toggle start/stop by touching number
DONE: implement shapes
DONE: no sleep while timer running
DONE: toggle shape (if shape enabled then shapes use selected colors, background uses all colors)
DONE: fix placement of buttons and inputs
DONE: number input for time and max (tied to number and equation toggle)
DONE: if colors collide, increment the second color by 1 or wrap back to 0
DONE: blinders (black out for set time, show picture for set time, **need more details)
center numbers better when shapes are visible
colors for numbers
-->
<script>
/*! NoSleep.min.js v0.11.0 - git.io/vfn01 - Rich Tibbett - MIT license */
!function(A,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.NoSleep=e():A.NoSleep=e()}(window,(function(){return function(A){var e={};function o(n){if(e[n])return e[n].exports;var t=e[n]={i:n,l:!1,exports:{}};return A[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=A,o.c=e,o.d=function(A,e,n){o.o(A,e)||Object.defineProperty(A,e,{enumerable:!0,get:n})},o.r=function(A){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},o.t=function(A,e){if(1&e&&(A=o(A)),8&e)return A;if(4&e&&"object"==typeof A&&A&&A.__esModule)return A;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:A}),2&e&&"string"!=typeof A)for(var t in A)o.d(n,t,function(e){return A[e]}.bind(null,t));return n},o.n=function(A){var e=A&&A.__esModule?function(){return A.default}:function(){return A};return o.d(e,"a",e),e},o.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},o.p="",o(o.s=0)}([function(A,e,o){"use strict";var n=function(){function A(A,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(A,n.key,n)}}return function(e,o,n){return o&&A(e.prototype,o),n&&A(e,n),e}}();var t=o(1),B=t.webm,Q=t.mp4,c="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,i="wakeLock"in navigator,a=function(){function A(){var e=this;if(function(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}(this,A),i){this._wakeLock=null;var o=function(){null!==e._wakeLock&&"visible"===document.visibilityState&&e.enable()};document.addEventListener("visibilitychange",o),document.addEventListener("fullscreenchange",o)}else c?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",B),this._addSourceToVideo(this.noSleepVideo,"mp4",Q),this.noSleepVideo.addEventListener("loadedmetadata",(function(){e.noSleepVideo.duration<=1?e.noSleepVideo.setAttribute("loop",""):e.noSleepVideo.addEventListener("timeupdate",(function(){e.noSleepVideo.currentTime>.5&&(e.noSleepVideo.currentTime=Math.random())}))})))}return n(A,[{key:"_addSourceToVideo",value:function(A,e,o){var n=document.createElement("source");n.src=o,n.type="video/"+e,A.appendChild(n)}},{key:"enable",value:function(){var A=this;i?navigator.wakeLock.request("screen").then((function(e){A._wakeLock=e,console.log("Wake Lock active."),A._wakeLock.addEventListener("release",(function(){console.log("Wake Lock released.")}))})).catch((function(A){console.error(A.name+", "+A.message)})):c?(this.disable(),console.warn("\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      "),this.noSleepTimer=window.setInterval((function(){document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){i?(this._wakeLock.release(),this._wakeLock=null):c?this.noSleepTimer&&(console.warn("\n          NoSleep now disabled for older iOS devices.\n        "),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),A}();A.exports=a},function(A,e,o){"use strict";A.exports={webm:"data:video/webm;base64,GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=",mp4:"data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}}])}));
</script>

<script>
  var noSleep = new NoSleep();
  var wakeLockEnabled = false;
  
  var futTimer = undefined;
  var intervalTime = 2000;
  var allColors = ["red", "yellow", "blue", "orange", "white", "brown", "green", "purple"];
  var activeColors = ["red", "yellow", "blue", "orange"];
  
  var blinkTimer = undefined;
  var blinkInterval = 500;
  
  var operators = ["+", "-"]
  var maxNumber = 9;
  var maxEquationNum = 9;
  
  var shapes = {
    "circle": '<circle id="shape" cx="50%" cy="50%" r="45" fill="green" stroke="black" stroke-width=".5"></circle>',
    "oval": '<ellipse id="shape" cx="50%" cy="50%" rx="55" ry="35" fill="green" stroke="black" stroke-width=".5"></ellipse>', 
    "triangle": '<polygon id="shape" points="0,-40 55,40 -55,40" transform="translate(50,50)" fill="green" stroke="black" stroke-width=".5"></polygon>', 
    "square": '<polygon id="shape" points="-45,-45 45,-45 45,45 -45,45" transform="translate(50,50)" fill="green" stroke="black" stroke-width=".5"></polygon>', 
    "rectangle": '<polygon id="shape" points="-45,-30 45,-30 45,30 -45,30" transform="translate(50,50)" fill="green" stroke="black" stroke-width=".5"></polygon>', 
    "rhombus": '<polygon id="shape" points="0,-45 55,45 0,45 -55,-45" transform="translate(50,50)" fill="green" stroke="black" stroke-width=".5"></polygon>', 
    "diamond": '<polygon id="shape" points="0,-45 55,0 0,45 -55,0" transform="translate(50,50)" fill="green" stroke="black" stroke-width=".5"></polygon>', 
    "trapezoid": '<polygon id="shape" points="-30,-35 30,-35 55,35 -55,35" transform="translate(50,50)" fill="green" stroke="black" stroke-width=".5"></polygon>', 
    "pentagon": '<polygon id="shape" points="-45,-22 -45,22 0,45 45,22 45,-22 0,-45" transform="translate(50,50)" fill="green" stroke="black" stroke-width=".5"></polygon>'
  }
    
  var isNumber = true;
  var isBackground = true;
  
  function toggleTimer(elem) {
    // set no sleep
    if (!wakeLockEnabled) {
      noSleep.enable(); // keep the screen on!
      wakeLockEnabled = true;
    } else {
      noSleep.disable(); // let the screen turn off.
      wakeLockEnabled = false;
    }
    
    // setup timer
    if (window.futTimer) {
      clearInterval(futTimer);
      futTimer = undefined;
      document.body.style.backgroundColor = "white";
      document.getElementById("shapes").innerHTML = "";
      elem.style.color = "white";
      elem.innerHTML = "S";
    } else {
      randomize();
      futTimer = setInterval(randomize, intervalTime);
      elem.style.color = "lightslategray";
    }
  };
  
  function randomize() {
    let randA = Math.random();
    let randB = Math.random();
    let randC = Math.random();
    let randBackClr = Math.random();
    let randShape = Math.random();
    let randShapeClr = Math.random();
      
    // set number
    firstNum = Math.floor(randA * maxNumber) + 1;
    secondNum = Math.floor(randB * maxNumber) + 1;
    op = operators[Math.floor(randC * operators.length)];
    if (isNumber) {
      document.getElementById("numbers").innerHTML = Math.floor(randA * maxNumber) + 1; 
    } else {
      document.getElementById("numbers").innerHTML = Math.max(firstNum, secondNum) + op + Math.min(firstNum, secondNum);
    }
      
    // set background color
    if (isBackground) {
      // clear shape
      document.getElementById("shapes").innerHTML = "";
      
      // set background color from activeColors
      let bkClrInd = Math.floor(randBackClr * activeColors.length);
      let bkClr = activeColors[bkClrInd];
      document.body.style.backgroundColor = bkClr;
    } else {
      // set shape
      let shpInd = Math.floor(randShape * Object.keys(shapes).length);
      let shpKey = Object.keys(shapes)[shpInd];
      let shapeVal = shapes[shpKey];
      
      let shpClrInd = Math.floor(randShapeClr * activeColors.length);
      let shpClr = activeColors[shpClrInd];
      
      document.getElementById("shapes").innerHTML = shapeVal;
      document.getElementById("shape").style.fill = shpClr;

      // set background color from allColors
      let bkClrInd = Math.floor(randBackClr * allColors.length);
      let bkClr = allColors[bkClrInd];
      
      // step color if the same
      if (shpClr == bkClr) {
        bkClrInd = (bkClrInd + 1) % allColors.length;
        bkClr = allColors[bkClrInd];
      }
      
      document.body.style.backgroundColor = bkClr;
    }
  };
    
  function blink() {
    if (!window.futTimer) { return; }
    displayType = document.getElementById("blinker").style.display;
    if (displayType == "") {
      document.getElementById("blinker").style.display = "none";
    } else {
      document.getElementById("blinker").style.display = "";
    }
  };
  
  function clickColor(elem) {
    // Enabled = -40px, Disabled = -90px
    let index = activeColors.indexOf(elem.id);
    if (index >= 0) {
      activeColors.splice( index, 1 );
      elem.style.left = "-90px";
    } else {
      activeColors.push(elem.id);
      elem.style.left = "-40px";
    }

    return true;
  };    
   
  function toggleNumber(button) {
    if (isNumber) {
      isNumber = false;
      button.innerHTML = "Numbers";
    } else {
      isNumber = true;
      button.innerHTML = "Equations";
    }
  };
    
  function toggleShape(button) {
    if (isBackground) {
      isBackground = false;
      button.innerHTML = "Background";
    } else {
      isBackground = true;
      button.innerHTML = "Shapes";
    }
  };  
  
  function toggleSleep(button) {
    if (!wakeLockEnabled) {
      noSleep.enable(); // keep the screen on!
      wakeLockEnabled = true;
      button.innerHTML = "Sleep";
    } else {
      noSleep.disable(); // let the screen turn off.
      wakeLockEnabled = false;
      button.innerHTML = "No Sleep";
    }
  };  
  
  function toggleBlink(button) {
    // setup timer
    if (window.blinkTimer) {
      clearInterval(blinkTimer);
      blinkTimer = undefined;
      button.innerHTML = "Blink";
    } else {
      blinkTimer = setInterval(blink, blinkInterval);
      button.innerHTML = "No Blink";
      document.getElementById("blinker").style.display = "none";
    }
  };
  
  function changeTimeInterval(evt) {
    intervalTime = evt.value * 1000;

    // reset timer with new interval
    clearInterval(futTimer);
    randomize();
    futTimer = setInterval(randomize, intervalTime);
  };
  
  function changeMaxNumber(evt) {
    maxNumber = evt.value;
  };
  
  function changeBlinkInterval(evt) {
    blinkInterval = evt.value;
    
    // reset timer with new interval
    clearInterval(blinkTimer);
    blinkTimer = setInterval(blink, blinkInterval);
  };
  
  function run() {
    console.log(">> RUN");

    // initialize inputs
    intervalTime = document.getElementById("timeInterval").value * 1000;
    maxNumber  = document.getElementById("maxNumber").value;
    
    // initialize color tags
    for (clrInd in activeColors) {
      let clr = activeColors[clrInd];
      let elem = document.getElementById(clr);
      elem.style.left = "-40px";
    }
  }

  // in case the document is already rendered
  if (document.readyState!='loading') run();
  // modern browsers
  else if (document.addEventListener) document.addEventListener('DOMContentLoaded', run);
  // IE <= 8
  else document.attachEvent('onreadystatechange', function(){
    if (document.readyState=='complete') run();
  });
</script>
  
  <div id="blinker" style="display: none">
  </div>
  
  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0);" id="red" onclick="clickColor(this);"></a>
    <a href="javascript:void(0);" id="yellow" onclick="clickColor(this);"></a>
    <a href="javascript:void(0);" id="blue" onclick="clickColor(this);"></a>
    <a href="javascript:void(0);" id="orange" onclick="clickColor(this);"></a>
    <a href="javascript:void(0);" id="white" onclick="clickColor(this);"></a>
    <a href="javascript:void(0);" id="brown" onclick="clickColor(this);"></a>
    <a href="javascript:void(0);" id="green" onclick="clickColor(this);"></a>
    <a href="javascript:void(0);" id="purple" onclick="clickColor(this);"></a>
  </div>
  
  <h1 id="numbers" onclick="toggleTimer(this)" style="color: white">S</h1>

  <svg version="1.1" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet" id="shapes">
  </svg>
      
  <div id="buttons">
    <button id="numToggle" onclick="toggleNumber(this)">Equations</button>
    <button id="shapeToggle" onclick="toggleShape(this)">Shapes</button>
    <button id="blinkToggle" onclick="toggleBlink(this)">Blink</button>
  </div>

  <div id="inputs">
    <label for="timeInterval">Time Interval (1-5s)</label>
    <input type="number" id="timeInterval" name="timeInterval" min="1" max="5" onchange="changeTimeInterval(this)" value="2">
    <label for="maxNumber">Number Max (1-99)</label>
    <input type="number" id="maxNumber" name="maxNumber" min="1" max="99" onchange="changeMaxNumber(this)" value="20">
    <label for="blinkInterval">Blink Interval (200-1000ms)</label>
    <input type="number" id="blinkInterval" name="blinkInterval" min="200" max="1000" onchange="changeBlinkInterval(this)" value="500">
  </div>
</body>
